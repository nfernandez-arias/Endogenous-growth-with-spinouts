setwd("/home/nico/Google Drive/PhD - Big boy/Research/Endogenous growth with worker flows and noncompetes/data/work")
ptm <- proc.time()
library(readstata13)
source('stata_merge.R')
patents <- read.dta13('Raw/pat76_06_assg.dta')
patents$year <- patents$appyear
# Read in datasets
inventors <- read.csv('Raw/inventor.csv')
names(inventors)[names(inventors) == 'Patent'] <- 'patent'
# Destring patent variable
inventors$patent = as.numeric(as.character(inventors$patent))
# Merge
#rm(list = setdiff(ls(), lsf.str()))
#inventors_patents <- stata.merge(patents,inventors,"patent")
inventors_patents <- merge(patents,inventors,by = "patent")
proc.time() - ptm
rm(list = c("inventors","patents"))
## Load dynass_reshaped
dynass = read.dta13('Data/dynass_reshaped.dta')
head(dynass)
# Merge
inventors_patents_dynass <- stata.merge(inventors_patents,dynass,c("pdpass","year"))
inventors_patents_dynass <- inventors_patents_dynass[(inventors_patents_dynass$stata.merge.variable == 3),]
inventors_patents_dynass$stata.merge.variable <- NULL
inventors_patents_dynass <- inventors_patents_dynass[(inventors_patents_dynass$country == "US"),]
#head(inventors_patents_dynass)
rm(list = c("inventors_patents","dynass"))
## Load compustat dataset
compustat <- read.dta13('Raw/compustat_annual.dta')
compustat$year <- compustat$fyear
compustat <- compustat[,c("gvkey","year","xrd","loc","state","sic","naics","conm")]
# names(inventors_patents_dynass)[names(inventors_patents_dynass) == 'stata.merge.variable'] <- '_merge'
# Merge
inventors_patents_dynass_compustat <- stata.merge(inventors_patents_dynass,compustat,c("gvkey","year"))
tabulate(inventors_patents_dynass_compustat$stata.merge.variable)
# Merge
rm(list = setdiff(ls(), lsf.str()))
## Load dynass_reshaped
dynass = read.dta13('Data/dynass_reshaped.dta')
View(dynass)
View(dynass)
ptm <- proc.time()
library(readstata13)
patents <- read.dta13('Raw/pat76_06_assg.dta')
names(patents)
patents$year <- patents$appyear
# Read in datasets
inventors <- read.csv('Raw/inventor.csv')
names(inventors)[names(inventors) == 'Patent'] <- 'patent'
# Destring patent variable
inventors$patent = as.numeric(as.character(inventors$patent))
# Merge
#rm(list = setdiff(ls(), lsf.str()))
#inventors_patents <- stata.merge(patents,inventors,"patent")
inventors_patents <- merge(patents,inventors,by = "patent")
proc.time() - ptm
rm(list = c("inventors","patents"))
inventors_patents <- inventors_patents[,c("patent","pdpass","year","cclass","country","City","State","Firstname","Lastname","Country","Zipcode")]
# Merge
inventors_patents_dynass <- stata.merge(inventors_patents,dynass,c("pdpass","year"))
library(dplyr)
install.packages("dplyr")
library(dplyr)
install.packages("dplyr")
inventors_patents_dynass <- inventors_patents_dynass[(inventors_patents_dynass$merge == 3),]
inventors_patents_dynass$merge <- NULL
inventors_patents_dynass <- inventors_patents_dynass[(inventors_patents_dynass$country == "US"),]
#head(inventors_patents_dynass)
rm(list = c("inventors_patents","dynass"))
install.packages("dplyr")
library(dplyr)
rm(list = c("inventors","patents"))
inventors_patents <- inventors_patents[,c("patent","pdpass","year","cclass","country","City","State","Firstname","Lastname","Country","Zipcode")]
setwd("/home/nico/Google Drive/PhD - Big boy/Research/Endogenous growth with worker flows and noncompetes/data/work")
ptm <- proc.time()
library(readstata13)
library(dplyr)
source('stata_merge.R')
patents <- read.dta13('Raw/pat76_06_assg.dta')
patents$year <- patents$appyear
# Read in datasets
inventors <- read.csv('Raw/inventor.csv')
