library(tidyverse)
library(tidyquant)
install.packages(tidyquant)
install.packages("tidyquant")
install.packages("tidyquant")
install.packages("parallel")
library("parallel")
rm(list = setdiff(ls(), lsf.str()))
setwd("/home/nico/nfernand@princeton.edu/PhD - Big boy/Research/Endogenous growth with worker flows and noncompetes/data/work")
library(readstata13)
library(plyr)
library(dplyr)
library(data.table)
source('Code/Functions/stata_merge.R')
yearStateEntry <- data.table(read.dta13("Data/entry_rates_by_state.dta"))
View(yearStateEntry)
data <- fread("Raw/bds_f_szst_release.csv")
View(data)
stateNames <- fread("Raw/stateAbbreviations.csv")
View(stateNames)
stateNames <- fread("Raw/statecodesabbrevs.csv")
View(stateNames)
?merge
View(data)
View(stateNames)
setkey(data,state)
setkey(stateNames,state)
data2 <- merge(data,stateNames,state)
data2 <- merge(data,stateNames,by = "state")
View(data2)
data <- fread("Raw/bds_f_agest_release.csv")
stateNames <- fread("Raw/statecodesabbrevs.csv")
setkey(data,state)
setkey(stateNames,state)
data2 <- merge(data,stateNames,by = "state")
View(data2)
data <- data[fage4 == "a) 0"]
View(data)
stateNames <- fread("Raw/statecodesabbrevs.csv")
setkey(data,state)
setkey(stateNames,state)
data2 <- merge(data,stateNames,by = "state")
View(data2)
data[fage4 := NULL]
data[,fage4 := NULL]
source('~/nfernand@princeton.edu/PhD - Big boy/Research/Endogenous growth with worker flows and noncompetes/data/work/Code/clean_FirmEntryMeasures_state.R')
source('~/nfernand@princeton.edu/PhD - Big boy/Research/Endogenous growth with worker flows and noncompetes/data/work/Code/clean_FirmEntryMeasures_state.R', echo=TRUE)
View(data2)
fwrite(data2,"Data/firmEntryByState.csv")
rm(list = setdiff(ls(), lsf.str()))
setwd("/home/nico/nfernand@princeton.edu/PhD - Big boy/Research/Endogenous growth with worker flows and noncompetes/data/work")
library(readstata13)
library(plyr)
library(dplyr)
library(data.table)
source('Code/Functions/stata_merge.R')
## (1) Read in Data
yearStateXrdRDUserCostGDP <- fread("Data/yearStateXrd-RDUserCost-GDP_stateLevel_compustatAggregation.csv")
yearStateEntry <- data.table(read.dta13("Data/firmEntryByState.dta"))
View(yearStateEntry)
yearStateEntry <- data.table(read.dta13("Data/firmEntryByState.csv"))
yearStateEntry <- data.table(read.dta13("Data/firmEntryByState.csv"))
yearStateEntry <- fread("Data/firmEntryByState.csv")
rm(list = setdiff(ls(), lsf.str()))
setwd("/home/nico/nfernand@princeton.edu/PhD - Big boy/Research/Endogenous growth with worker flows and noncompetes/data/work")
library(readstata13)
library(plyr)
library(dplyr)
library(data.table)
source('Code/Functions/stata_merge.R')
## (1) Read in Data
yearStateXrdRDUserCostGDP <- fread("Data/yearStateXrd-RDUserCost-GDP_stateLevel_compustatAggregation.csv")
yearStateEntry <- fread("Data/firmEntryByState.csv")
View(yearStateEntry)
View(yearStateEntry)
yearStateEntry <- yearStateEntry %>% select(state,stateAbbrev,year2,Firms,Estabs,Emp)
yearStateEntry[,year := year2]
yearStateEntry[,year2 := NULL]
View(yearStateEntry)
setkey(yearStateXrdRDUserCostGDP,state,year)
setkey(yearStateEntry,state,year)
yearStateXrdRDUserCostGDP_yearStateEntry_merge <- merge(yearStateXrdRDUserCostGDP,yearStateEntry)
View(yearStateEntry)
View(yearStateXrdRDUserCostGDP)
setkey(yearStateXrdRDUserCostGDP,state,year)
setkey(yearStateEntry,stateAbbrev,year)
yearStateXrdRDUserCostGDP_yearStateEntry_merge <- merge(yearStateXrdRDUserCostGDP,yearStateEntry)
View(yearStateEntry)
ta
#
# (2) Cleans (b) - rename, convert to csv, etc.
#
# (3) Merges the datasets by state-year
#
# (4) Outputs combind dataset in csv format to
#     Data/yearStateXrd-RDUserCost-GDP-entryMeasures_stateLevel_compustatAggregation.csv
#
## (i) Preamble
rm(list = setdiff(ls(), lsf.str()))
setwd("/home/nico/nfernand@princeton.edu/PhD - Big boy/Research/Endogenous growth with worker flows and noncompetes/data/work")
library(readstata13)
library(plyr)
library(dplyr)
library(data.table)
source('Code/Functions/stata_merge.R')
## (1) Read in Data
yearStateXrdRDUserCostGDP <- fread("Data/yearStateXrd-RDUserCost-GDP_stateLevel_compustatAggregation.csv")
yearStateEntry <- fread("Data/firmEntryByState.csv")
## (2) Clean yearStateEntry
yearStateEntry <- yearStateEntry %>% select(state,stateAbbrev,year2,Firms,Estabs,Emp) %>% rename(stateNum = state, state = stateAbbrev)
## (3) Merge datasets
View(yearStateEntry)
setkey(yearStateXrdRDUserCostGDP,state,year)
setkey(yearStateEntry,state,year)
yearStateEntry <- yearStateEntry %>% select(state,stateAbbrev,year2,Firms,Estabs,Emp) %>% rename(stateNum = state, state = stateAbbrev,year = year2)
setkey(yearStateXrdRDUserCostGDP,state,year)
setkey(yearStateEntry,state,year)
View(yearStateEntry)
rm(list = setdiff(ls(), lsf.str()))
setwd("/home/nico/nfernand@princeton.edu/PhD - Big boy/Research/Endogenous growth with worker flows and noncompetes/data/work")
library(readstata13)
library(plyr)
library(dplyr)
library(data.table)
source('Code/Functions/stata_merge.R')
## (1) Read in Data
yearStateXrdRDUserCostGDP <- fread("Data/yearStateXrd-RDUserCost-GDP_stateLevel_compustatAggregation.csv")
yearStateEntry <- fread("Data/firmEntryByState.csv")
## (2) Clean yearStateEntry
yearStateEntry <- yearStateEntry %>% select(state,stateAbbrev,year2,Firms,Estabs,Emp) %>% rename(stateNum = state, state = stateAbbrev,year = year2)
## (3) Merge datasets
View(yearStateEntry)
setkey(yearStateXrdRDUserCostGDP,state,year)
setkey(yearStateEntry,state,year)
yearStateXrdRDUserCostGDP_yearStateEntry_merge <- merge(yearStateXrdRDUserCostGDP,yearStateEntry)
View(yearStateXrdRDUserCostGDP_yearStateEntry_merge)
fwrite(yearStateXrdRDUserCostGDP_yearStateEntry_merge,"Data/yearStateXrd-RDUserCost-GDP-firmEntryMeasures_stateLevel_compustatAggregation.csv")
rm(list = setdiff(ls(), lsf.str()))
setwd("/home/nico/nfernand@princeton.edu/PhD - Big boy/Research/Endogenous growth with worker flows and noncompetes/data/work")
library(readstata13)
library(plyr)
library(dplyr)
library(data.table)
source('Code/Functions/stata_merge.R')
yearStateEntry <- fread("Data/firmEntryByState.csv")
View(yearStateEntry)
data <- fread("Raw/bds_f_st_release.csv")
View(yearStateEntry)
View(data)
rm(list = setdiff(ls(), lsf.str()))
setwd("/home/nico/nfernand@princeton.edu/PhD - Big boy/Research/Endogenous growth with worker flows and noncompetes/data/work")
library(plyr)
library(dplyr)
library(data.table)
data <- fread("Raw/bds_f_agest_release.csv")
View(data)
View(data)
View(data)
rm(list = setdiff(ls(), lsf.str()))
setwd("/home/nico/nfernand@princeton.edu/PhD - Big boy/Research/Endogenous growth with worker flows and noncompetes/data/work")
library(plyr)
library(dplyr)
library(data.table)
data <- fread("Raw/bds_f_agest_release.csv")
data[, empTotal := sum(Emp), by = c("state","year2")]
View(data)
# File name: clean_FirmEntryMeasures_state.R
#
# Description:
#
# (1) Reads in:
rm(list = setdiff(ls(), lsf.str()))
setwd("/home/nico/nfernand@princeton.edu/PhD - Big boy/Research/Endogenous growth with worker flows and noncompetes/data/work")
library(plyr)
library(dplyr)
library(data.table)
data <- fread("Raw/bds_f_agest_release.csv")
data[, empTotal := sum(Emp), by = c("state","year2")]
data <- data[fage4 == "a) 0"]
data[,fage4 := NULL]
stateNames <- fread("Raw/statecodesabbrevs.csv")
setkey(data,state)
setkey(stateNames,state)
data2 <- merge(data,stateNames,by = "state")
View(data2)
fwrite(data2,"Data/firmEntryByState.csv")
source('~/nfernand@princeton.edu/PhD - Big boy/Research/Endogenous growth with worker flows and noncompetes/data/work/Code/xrd-rdUserCost-GDP-firmEntryMeasures_merge_stateLevel_compustatAggregation.R', echo=TRUE)
source('~/nfernand@princeton.edu/PhD - Big boy/Research/Endogenous growth with worker flows and noncompetes/data/work/Code/clean_FirmEntryMeasures_state.R', echo=TRUE)
source('~/nfernand@princeton.edu/PhD - Big boy/Research/Endogenous growth with worker flows and noncompetes/data/work/Code/xrd-rdUserCost-GDP-firmEntryMeasures_merge_stateLevel_compustatAggregation.R', echo=TRUE)
source('~/nfernand@princeton.edu/PhD - Big boy/Research/Endogenous growth with worker flows and noncompetes/data/work/Code/clean_FirmEntryMeasures_state.R', echo=TRUE)
View(data2)
source('~/nfernand@princeton.edu/PhD - Big boy/Research/Endogenous growth with worker flows and noncompetes/data/work/Code/xrd-rdUserCost-GDP-firmEntryMeasures_merge_stateLevel_compustatAggregation.R', echo=TRUE)
source('~/nfernand@princeton.edu/PhD - Big boy/Research/Endogenous growth with worker flows and noncompetes/data/work/Code/clean_FirmEntryMeasures_state.R', echo=TRUE)
View(data2)
data[, firmsTotal := sum(Firms), by = c("state","year2")]
source('~/nfernand@princeton.edu/PhD - Big boy/Research/Endogenous growth with worker flows and noncompetes/data/work/Code/clean_FirmEntryMeasures_state.R', echo=TRUE)
source('~/nfernand@princeton.edu/PhD - Big boy/Research/Endogenous growth with worker flows and noncompetes/data/work/Code/xrd-rdUserCost-GDP-firmEntryMeasures_merge_stateLevel_compustatAggregation.R', echo=TRUE)
